<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Updater - Celizes Catering</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0A0A0A;
            color: #FFFFFF;
            padding: 2rem;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            background: #151515;
            padding: 2rem;
            border-radius: 12px;
            border: 2px solid #D4AF37;
            margin-bottom: 2rem;
        }
        h1 { color: #D4AF37; margin-bottom: 0.5rem; }
        .btn {
            background: #D4AF37;
            color: #000;
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            margin: 0.5rem;
        }
        .btn:hover { background: #B8941F; }
        .output {
            background: #151515;
            border: 2px solid #D4AF37;
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
            display: none;
        }
        .output.show { display: block; }
        .code-block {
            background: #0A0A0A;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            overflow-x: auto;
        }
        .success { color: #10B981; }
        .warning { color: #F59E0B; }
        pre { color: #9CA3AF; white-space: pre-wrap; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Website Updater</h1>
            <p style="color: #9CA3AF; margin-top: 0.5rem;">Generate your updated website with latest menu items from admin portal</p>
        </div>

        <div style="background: #151515; padding: 2rem; border-radius: 12px; border: 2px solid #D4AF37;">
            <h2 style="color: #D4AF37; margin-bottom: 1rem;">How It Works</h2>
            <ol style="color: #9CA3AF; line-height: 2;">
                <li>This page reads your menu items from localStorage (saved by admin portal)</li>
                <li>Generates a complete updated index.html file with your changes</li>
                <li>You download the new index.html file</li>
                <li>Replace your old index.html in your project folder</li>
                <li>Deploy to Vercel (git add, commit, push)</li>
                <li>Your live website is updated! ‚úÖ</li>
            </ol>

            <button class="btn" onclick="generateWebsite()">üì• Generate Updated Website</button>
            <button class="btn" onclick="window.open('admin-portal.html', '_blank')" style="background: #151515; color: #fff; border: 2px solid #D4AF37;">‚Üê Back to Admin Portal</button>
        </div>

        <div id="output" class="output">
            <h2 style="color: #D4AF37; margin-bottom: 1rem;">‚úÖ Generated Successfully!</h2>

            <div class="code-block">
                <p class="success"><strong>üìä Menu Items Found: <span id="itemCount">0</span></strong></p>
                <p style="color: #9CA3AF; margin-top: 0.5rem;">Last updated: <span id="timestamp"></span></p>
            </div>

            <h3 style="color: #D4AF37; margin: 1.5rem 0 1rem 0;">Next Steps:</h3>
            <ol style="color: #9CA3AF; line-height: 2; margin-bottom: 1.5rem;">
                <li class="success">‚úÖ Click the download button below</li>
                <li>üìÇ Save the file to your project folder: <code style="color: #D4AF37;">C:\Users\ezeki\OneDrive\Desktop\celizes-catering-website\</code></li>
                <li>‚ö†Ô∏è Replace your old index.html (backup the old one first!)</li>
                <li>üöÄ Deploy:<br>
                    <code style="color: #10B981;">git add .<br>git commit -m "Updated menu from admin portal"<br>git push</code>
                </li>
                <li>üéâ Check your live website!</li>
            </ol>

            <button class="btn" onclick="downloadWebsite()" style="background: #10B981;">üì• Download Updated index.html</button>
            <button class="btn" onclick="previewCode()">üëÅÔ∏è Preview Code</button>
        </div>

        <div id="codePreview" class="output">
            <h2 style="color: #D4AF37; margin-bottom: 1rem;">Code Preview</h2>
            <div class="code-block">
                <pre id="codeDisplay"></pre>
            </div>
        </div>
    </div>

    <script>
        let generatedHTML = '';
        let menuItems = [];

        function generateWebsite() {
            // Load menu items from localStorage
            const savedItems = localStorage.getItem('menuItems');
            if (!savedItems) {
                alert('‚ùå No menu items found! Please use the admin portal to add menu items first.');
                return;
            }

            try {
                menuItems = JSON.parse(savedItems);
                console.log('üìä Loaded', menuItems.length, 'menu items');
            } catch (e) {
                alert('‚ùå Error loading menu items');
                return;
            }

            // Load homepage content
            const homepageContent = JSON.parse(localStorage.getItem('homepageContent') || '{}');

            // Generate menu HTML by category
            const categories = {
                'Main Dishes': [],
                'Soups & Stews': [],
                'Baked Goods & Cakes': [],
                'Snacks & Drinks': []
            };

            menuItems.forEach(item => {
                if (categories[item.category]) {
                    categories[item.category].push(item);
                }
            });

            let menuHTML = '';
            for (const [category, items] of Object.entries(categories)) {
                if (items.length > 0) {
                    menuHTML += `
                <div class="menu-category">
                    <h3>${category}</h3>
                    <div class="menu-grid">`;

                    items.forEach(item => {
                        menuHTML += `
                        <div class="menu-item" data-item-id="${item.id}">
                            <div class="menu-item-image">
                                ${item.image ? `<img src="${item.image}" alt="${item.name}">` : 'üçΩÔ∏è'}
                            </div>
                            <h4>${item.name}</h4>
                            <p class="price">${item.price}</p>
                            ${item.description ? `<p class="description">${item.description}</p>` : ''}
                            <button onclick="addToCart(${item.id}, '${item.name.replace(/'/g, "\'")}', '${item.price}')">Add to Cart</button>
                        </div>`;
                    });

                    menuHTML += `
                    </div>
                </div>`;
                }
            }

            // Generate complete HTML file
            generatedHTML = \`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>\${homepageContent.businessName || 'Celizes Catering'} - \${homepageContent.tagline || 'Taste of Africa'}</title>
    <style>
        /* Your existing styles from your main website */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }

        /* Hero Section */
        .hero {
            min-height: 70vh;
            background: linear-gradient(135deg, #D4AF37 0%, #B8941F 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
        }
        .hero h1 { font-size: 3rem; margin-bottom: 1rem; }
        .hero p { font-size: 1.25rem; margin-bottom: 2rem; }

        /* Menu Section */
        .menu-section {
            padding: 4rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        .menu-category {
            margin-bottom: 4rem;
        }
        .menu-category h3 {
            color: #D4AF37;
            font-size: 2rem;
            margin-bottom: 2rem;
            border-bottom: 3px solid #D4AF37;
            padding-bottom: 0.5rem;
        }
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
        }
        .menu-item {
            background: white;
            border: 2px solid #D4AF37;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.3);
        }
        .menu-item-image {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        .menu-item h4 {
            color: #333;
            margin-bottom: 0.5rem;
        }
        .menu-item .price {
            color: #D4AF37;
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        .menu-item .description {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        .menu-item button {
            background: #D4AF37;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }
        .menu-item button:hover {
            background: #B8941F;
        }

        /* Contact Section */
        .contact-section {
            background: #151515;
            color: white;
            padding: 4rem 2rem;
            text-align: center;
        }
        .contact-section h2 {
            color: #D4AF37;
            margin-bottom: 2rem;
        }
        .contact-info {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
        }
        .contact-item {
            padding: 1rem 2rem;
            background: rgba(212, 175, 55, 0.1);
            border: 2px solid #D4AF37;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="hero">
        <div>
            <h1>\${homepageContent.heroHeadline || homepageContent.businessName || 'Celizes Catering'}</h1>
            <p>\${homepageContent.tagline || 'Taste of Africa'}</p>
            <p>\${homepageContent.heroDescription || 'Bringing authentic African cuisine to Thunder Bay, Ontario'}</p>
        </div>
    </div>

    <div class="menu-section" id="menu">
        <h2 style="text-align: center; color: #D4AF37; font-size: 2.5rem; margin-bottom: 3rem;">Our Menu</h2>
        \${menuHTML}
    </div>

    <div class="contact-section" id="contact">
        <h2>Contact Us</h2>
        <div class="contact-info">
            <div class="contact-item">üìß \${homepageContent.contactEmail || 'celizescatering@gmail.com'}</div>
            <div class="contact-item">üìû \${homepageContent.phone1 || '+1 (249) 885-1296'}</div>
            <div class="contact-item">üì± \${homepageContent.phone2 || '+1 (807) 357-9272'}</div>
        </div>
    </div>

    <script>
        function addToCart(id, name, price) {
            alert('Added to cart: ' + name + ' - ' + price);
            // Your cart logic here
        }
    </script>
</body>
</html>\`;

            // Show output
            document.getElementById('itemCount').textContent = menuItems.length;
            document.getElementById('timestamp').textContent = new Date().toLocaleString();
            document.getElementById('output').classList.add('show');

            console.log('‚úÖ Website generated successfully!');
        }

        function downloadWebsite() {
            if (!generatedHTML) {
                alert('Please generate the website first!');
                return;
            }

            const blob = new Blob([generatedHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'index.html';
            a.click();
            URL.revokeObjectURL(url);

            alert('‚úÖ Downloaded! Now:\n1. Replace index.html in your project\n2. git add .\n3. git commit -m "Updated menu"\n4. git push');
        }

        function previewCode() {
            if (!generatedHTML) {
                alert('Please generate the website first!');
                return;
            }

            document.getElementById('codeDisplay').textContent = generatedHTML;
            document.getElementById('codePreview').classList.add('show');
        }
    </script>
</body>
</html>
